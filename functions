#Hash
function hsum() { 
	if [[ ! -f $1 ]]
	then
		echo "missing file path"
	else
		echo "MD5" ; md5sum $1; 
		echo "SHA-1" ; sha1sum $1 ;
	fi
}
#SSH
function ssh-pwdless(){
	USNAME=`id -un`
	TARGET_SERVER=""
	TARGET_PORT=""
	TARGET_USNAME=""
	
	usage(){
		echo "SSH connexion passwordless"
		echo "$0 SERVER [PORT] [REMOTE_USER]"
	}
	
	if [[ -f ~/.ssh/id_rsa.pub ]]
	then 
		echo "Public key for [${USNAME}] available ... continue"
	else
		echo "ERROR : Public key for [${USNAME}] not available ... "
		echo "Generate your identity with the following command "
		echo "ssh-keygen -t rsa"
		return
	fi
	
	if [[ ! -z $1 ]]
	then
		TARGET_SERVER=$1
		echo "Target server is : ${TARGET_SERVER}"
	else
		echo "No target server ... exiting"
		return
	fi
	
	if [[ ! -z $2 ]]
	then
		TARGET_PORT=$2
		echo "Target port is : ${TARGET_PORT}"
	else
		echo "Default target port is 22"
		TARGET_PORT="22"
	fi
	
	if [[ ! -z $3 ]]
	then
		TARGET_USNAME=$3
		echo "Target user is : ${TARGET_USNAME}"
	else
		echo "Default user is ${USNAME}"
		TARGET_USNAME=${USNAME}
	fi

	ssh-copy-id -i ~/.ssh/id_rsa.pub "-p ${TARGET_PORT} ${TARGET_USNAME}@${TARGET_SERVER}"; 
	ssh -p ${TARGET_PORT} ${TARGET_USNAME}@${TARGET_SERVER} "echo $(cat ~/.ssh/id_rsa.pub) >> .ssh/authorized_keys"; 
	
 }

#DOCKER
function dwatch() {
        if [ ! $# -eq 1 ]
        then
                echo "missing <DOCKER ID> "
                docker ps
		return
        else
                watch -n2 "docker logs $1 --tail 20"
        fi
}

function dexec() {
        if [ ! $# -eq 1 ]
        then
                echo "missing <DOCKER ID> "
                docker ps
                return
        else
                docker exec -ti $1 bash 
        fi
}

